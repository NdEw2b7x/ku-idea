<!DOCTYPE html>
<html lang="ko" dir="ltr">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
  <style media="screen">
  .bg-kudark {
    background-color: rgb(3, 107, 63);
  }
  .bg-kulight {
    background-color: rgb(184, 243, 41);
  }
  .bg-ku {
    background-color: rgb(33, 186, 49);
  }
  </style>
  <title>이런 질문 왜 하는 건대?</title>
</head>
<body>
  <header class="navbar navbar-expand navbar-dark bg-kudark mb-3">
    <div class="container-fluid">
      <a class="navbar-brand" href="#">이런 질문 왜 하는 건대?</a>
      <div class="collapse navbar-collapse">
        <ul class="navbar-nav">
          <li class="nav-item">
            <a href="./" class="nav-link">초기화</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="mailto:genre_crusher.0l@icloud.com">제작자</a>
          </li>
        </ul>
      </div>
      <span class="navber-text"></span>
    </div>
  </header>
  <main class="container" style="max-width: 60rem;">
    <script type="text/javascript">
    // 질문 생성
    var qset = [];
    qset.push(["널 위해 죽을 수 있어","널 위해 죽일 수 있어"]);
    qset.push(["목소리 듣다 잠들기","목소리 듣다 흥분하기"]);
    qset.push(["애인이 팔 네 개","애인이 다리 네 개"]);
    qset.push(["애인 만날 때만 꾸미기","애인 만날 때만 안꾸미기"]);
    // 답변 생성
    var answer = [];
    </script>
    <article class="row g-3 mb-3" ondragstart="return false" oncontextmenu="return false" onselectstart="return false">
      <section class="col-12 col-sm-6">
        <div class="card border-success">
          <div class="card-header bg-success text-light">
            대답해보세요!
          </div>
          <form class="card-body p-1 pb-0">
            <script type="text/javascript">
            for (var i = 0; i < qset.length; i++) {
              answer.push([]);
              document.write("<div class=\"btn-group w-100 mb-1\" id=\"bg0"+i+"\">");
              for (var j = 0; j < qset[i].length; j++) {
                answer[i].push("");
                document.write("<input id=\"0"+i+j+"\" class=\"btn-check\" type=\"checkbox\" name=\"0"+i+j+"\" value=\""+j+"\">");
                document.write("<label id=\"for-0"+i+j+"\" class=\"btn btn-outline-success\" for=\"0"+i+j+"\" onclick=\"select("+i+","+j+")\">"+qset[i][j]+"</label>");
              }
              document.write("</div>");
            }
            </script>
          </form>
        </div>
      </section>
      <section class="col-12">
        <div class="d-grid">
          <button class="btn btn-success" data-bs-toggle="modal" data-bs-target="#modal-share" onclick="result()">결과 공유</button>
        </div>
      </section>
    </article>
    <div id="modal-share" class="modal">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header">
            아래 링크를 복사해서 공유하세요.
          </div>
          <div class="modal-body">
            <textarea id="share" rows="3" class="form-control"></textarea>
          </div>
        </div>
      </div>
    </div>
  </main>
  <script type="text/javascript">
  var url = window.location.origin + window.location.pathname;
  var parameter = window.location.search;
  for (var i = 0; i < answer.length; i++) {
    for (var j = 0; j < answer[i].length; j++) {
      var getanswer = new URLSearchParams(parameter).get("0"+i+j);
      console.log(getanswer);
      if (getanswer == 1) {
        answer[i][j] = 1;
        document.getElementById("0"+i+j).checked = true;
      } else {
        document.getElementById("0"+i+j).checked = false;
      }
    }
  }
  function result() {
    var stream = "?result=";
    for (var i = 0; i < answer.length; i++) {
      for (var j = 0; j < answer[i].length; j++) {
        stream = stream+"&0"+i+j+"="+answer[i][j];
      }
    }
    document.getElementById('share').innerText = url + stream;
  }
  function select(x,y) {
    if (document.getElementById("0"+x+y).checked == false) {
      answer[x][y] = 1;
    } else {
      answer[x][y] = 0;
    }
    var stream = "?result=";
    for (var i = 0; i < answer.length; i++) {
      for (var j = 0; j < answer[i].length; j++) {
        stream = stream+"&0"+i+j+"="+answer[i][j];
      }
    }
    location.href = url + stream + "#bg0"+Math.floor(x/10)*10;
  }
</script>
<footer class="py-3 bg-kulight">
  <div id="copyright" class="m-auto text-center">
    Copyright © 2021 이런 질문 왜 하는 건대?
  </div>
</footer>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
</body>
</html>
